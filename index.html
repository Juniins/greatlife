<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Script Cartpanda -->
    <script
      type="text/javascript"
      src="https://assets.mycartpanda.com/cartx-ecomm-ui-assets/js/cpsales.js"
    ></script>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Protocol Natural Recipes - Personalized Nutrition Quiz</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:wght@700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary: #87a96b;
        --secondary: #ffb6c1;
        --accent: #ff7f50;
        --background: #fff8dc;
        --white: #ffffff;
        --text: #333333;
        --light-gray: #f8f8f8;
        --border: #e0e0e0;
        --success: #52c41a;
      }

      body {
        font-family: "Poppins", sans-serif;
        background-color: var(--background);
        color: var(--text);
        line-height: 1.6;
      }

      .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Welcome Screen */
      .welcome-screen {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(
          135deg,
          var(--background) 0%,
          rgba(255, 182, 193, 0.3) 100%
        );
      }

      .welcome-content {
        text-align: center;
        padding: 40px;
        background: var(--white);
        border-radius: 30px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        max-width: 600px;
      }

      .welcome-content h1 {
        font-family: "Playfair Display", serif;
        font-size: 2.5em;
        color: var(--primary);
        margin-bottom: 20px;
      }

      .welcome-content p {
        font-size: 1.1em;
        color: #666;
        margin-bottom: 30px;
      }

      .icon-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin: 40px 0;
      }

      .icon-item {
        text-align: center;
        padding: 20px;
      }

      .icon-item .icon {
        font-size: 3em;
        margin-bottom: 10px;
      }

      .icon-item p {
        font-size: 0.9em;
        margin: 0;
      }

      /* Quiz Screen */
      .quiz-screen {
        min-height: 100vh;
        background: var(--white);
        display: none;
      }

      .quiz-header {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--secondary) 100%
        );
        padding: 30px 0;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .progress-container {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 20px;
        height: 20px;
        overflow: hidden;
        margin-bottom: 15px;
      }

      .progress-bar {
        background: var(--white);
        height: 100%;
        border-radius: 20px;
        transition: width 0.5s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8em;
        font-weight: 600;
        color: var(--primary);
      }

      .step-counter {
        text-align: center;
        color: var(--white);
        font-weight: 600;
      }

      /* Question Styles */
      .question-container {
        padding: 60px 20px;
        max-width: 700px;
        margin: 0 auto;
        animation: fadeIn 0.5s ease;
      }

      .question-title {
        font-size: 1.8em;
        font-weight: 600;
        color: var(--text);
        margin-bottom: 10px;
        text-align: center;
      }

      .question-subtitle {
        color: #666;
        text-align: center;
        margin-bottom: 40px;
      }

      /* Input Styles */
      .input-group {
        margin-bottom: 40px;
      }

      input[type="text"],
      input[type="number"],
      input[type="email"] {
        width: 100%;
        padding: 18px;
        font-size: 1.1em;
        border: 2px solid var(--border);
        border-radius: 15px;
        transition: all 0.3s ease;
        background: var(--light-gray);
      }

      input[type="text"]:focus,
      input[type="number"]:focus,
      input[type="email"]:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--white);
        transform: translateY(-2px);
        box-shadow: 0 5px 20px rgba(135, 169, 107, 0.2);
      }

      /* Option Cards */
      .options-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 40px;
      }

      .option-card {
        background: var(--light-gray);
        border: 2px solid transparent;
        border-radius: 20px;
        padding: 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .option-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      .option-card.selected {
        background: var(--white);
        border-color: var(--primary);
        transform: scale(1.05);
      }

      .option-card.selected::after {
        content: "‚úì";
        position: absolute;
        top: 10px;
        right: 10px;
        background: var(--primary);
        color: var(--white);
        width: 25px;
        height: 25px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
      }

      .option-icon {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .option-label {
        font-weight: 500;
        color: var(--text);
      }

      /* Range Slider */
      .range-container {
        margin: 40px 0;
      }

      .range-labels {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        color: #666;
      }

      .range-slider {
        width: 100%;
        height: 8px;
        border-radius: 5px;
        background: var(--border);
        outline: none;
        -webkit-appearance: none;
      }

      .range-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: var(--accent);
        cursor: pointer;
        box-shadow: 0 4px 10px rgba(255, 127, 80, 0.3);
        transition: all 0.3s ease;
      }

      .range-slider::-webkit-slider-thumb:hover {
        transform: scale(1.2);
      }

      .range-value {
        text-align: center;
        font-size: 2em;
        font-weight: 700;
        color: var(--accent);
        margin-top: 20px;
      }

      /* Navigation Buttons */
      .nav-buttons {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 50px;
      }

      .btn {
        padding: 15px 40px;
        border: none;
        border-radius: 30px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .btn-primary {
        background: var(--accent);
        color: var(--white);
      }

      .btn-primary:hover {
        background: #ff6347;
        transform: translateY(-3px);
        box-shadow: 0 10px 30px rgba(255, 127, 80, 0.3);
      }

      .btn-primary:disabled {
        background: #cccccc;
        cursor: not-allowed;
        transform: none;
      }

      .btn-secondary {
        background: transparent;
        color: var(--primary);
        border: 2px solid var(--primary);
      }

      .btn-secondary:hover {
        background: var(--primary);
        color: var(--white);
      }

      /* Results Screen */
      .results-screen {
        min-height: 100vh;
        background: linear-gradient(
          135deg,
          var(--background) 0%,
          rgba(255, 182, 193, 0.3) 100%
        );
        display: none;
        padding: 40px 20px;
      }

      .results-container {
        max-width: 800px;
        margin: 0 auto;
        background: var(--white);
        border-radius: 30px;
        padding: 60px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .results-title {
        font-family: "Playfair Display", serif;
        font-size: 2.5em;
        color: var(--primary);
        margin-bottom: 30px;
      }

      .result-card {
        background: var(--light-gray);
        border-radius: 20px;
        padding: 30px;
        margin: 20px 0;
        border-left: 5px solid var(--accent);
      }

      .result-card h3 {
        color: var(--primary);
        margin-bottom: 10px;
        font-size: 1.3em;
      }

      .cta-section {
        margin-top: 50px;
        padding: 40px;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--secondary) 100%
        );
        border-radius: 25px;
        color: var(--white);
      }

      .cta-section h2 {
        font-size: 2em;
        margin-bottom: 20px;
      }

      .cta-section p {
        font-size: 1.2em;
        margin-bottom: 30px;
      }

      .btn-cta {
        background: var(--white);
        color: var(--accent);
        padding: 20px 50px;
        font-size: 1.3em;
        border-radius: 35px;
        font-weight: 700;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        animation: pulse 2s infinite;
      }

      .btn-cta:hover {
        transform: scale(1.05);
        animation: none;
      }

      /* Animations */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      /* Responsive */
      @media (max-width: 768px) {
        .welcome-content h1 {
          font-size: 2em;
        }

        .icon-grid {
          grid-template-columns: 1fr;
        }

        .options-grid {
          grid-template-columns: 1fr;
        }

        .results-container {
          padding: 40px 20px;
        }

        .question-title {
          font-size: 1.5em;
        }
      }
    </style>
  </head>
  <body>
    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcomeScreen">
      <div class="welcome-content">
        <h1>Discover Your Perfect Nutrition Plan üåø</h1>
        <p>
          Take this personalized quiz to unlock your custom 21-day meal protocol
          designed specifically for your body, goals, and lifestyle.
        </p>

        <div class="icon-grid">
          <div class="icon-item">
            <div class="icon">üéØ</div>
            <p>Personalized</p>
          </div>
          <div class="icon-item">
            <div class="icon">‚ö°</div>
            <p>Quick & Easy</p>
          </div>
          <div class="icon-item">
            <div class="icon">üåü</div>
            <p>Science-Based</p>
          </div>
        </div>

        <button class="btn btn-primary" onclick="startQuiz()">
          Start My Journey ‚Üí
        </button>
      </div>
    </div>

    <!-- Quiz Screen -->
    <div class="quiz-screen" id="quizScreen">
      <div class="quiz-header">
        <div class="container">
          <div class="progress-container">
            <div class="progress-bar" id="progressBar">0%</div>
          </div>
          <div class="step-counter" id="stepCounter">Question 1 of 20</div>
        </div>
      </div>

      <div class="question-container" id="questionContainer">
        <!-- Questions will be dynamically inserted here -->
      </div>
    </div>

    <!-- Results Screen -->
    <div class="results-screen" id="resultsScreen">
      <div class="results-container">
        <h1 class="results-title">
          üéâ <span id="userName">Your</span> Personalized Plan is Ready!
        </h1>

        <div id="resultsContent">
          <!-- Results will be dynamically inserted here -->
        </div>

        <div class="cta-section">
          <h2>Ready to Transform Your Life?</h2>
          <p>
            Get instant access to your personalized 21-day nutrition protocol
            with 50+ delicious recipes tailored just for you!
          </p>
          <button class="btn btn-cta" onclick="goToCheckout()">
            Get My Custom Plan Now ‚Üí
          </button>
        </div>
      </div>
    </div>

    <script>
      // Quiz Data
      const quizData = {
        currentQuestion: 0,
        answers: {},
        questions: [
          {
            id: "name",
            type: "text",
            title: "Let's start with your name",
            subtitle: "We'll personalize your experience",
            placeholder: "Enter your first name",
          },
          {
            id: "age",
            type: "options",
            title: "What's your age group?",
            subtitle: "This helps us customize your nutrition needs",
            options: [
              { value: "25-34", label: "25-34", icon: "üå±" },
              { value: "35-44", label: "35-44", icon: "üåø" },
              { value: "45-54", label: "45-54", icon: "üåæ" },
              { value: "55-64", label: "55-64", icon: "üçÉ" },
              { value: "65+", label: "65+", icon: "üå≥" },
            ],
          },
          {
            id: "gender",
            type: "options",
            title: "How do you identify?",
            subtitle: "For accurate nutritional calculations",
            options: [
              { value: "female", label: "Female", icon: "üë©" },
              { value: "male", label: "Male", icon: "üë®" },
              { value: "other", label: "Prefer not to say", icon: "üåü" },
            ],
          },
          {
            id: "weight",
            type: "number",
            title: "What's your current weight?",
            subtitle: "We'll calculate your ideal portions",
            placeholder: "Enter weight in lbs",
          },
          {
            id: "goalWeight",
            type: "number",
            title: "What's your goal weight?",
            subtitle: "Let's set a realistic target",
            placeholder: "Enter goal weight in lbs",
          },
          {
            id: "primaryGoal",
            type: "options",
            title: "What's your main health goal?",
            subtitle: "Choose the most important one",
            options: [
              { value: "loseWeight", label: "Lose Weight", icon: "‚öñÔ∏è" },
              { value: "gainEnergy", label: "Boost Energy", icon: "‚ö°" },
              { value: "betterHealth", label: "Better Health", icon: "üíö" },
              { value: "muscleGain", label: "Build Muscle", icon: "üí™" },
              { value: "reduceInflammation", label: "Reduce Pain", icon: "üåü" },
            ],
          },
          {
            id: "activityLevel",
            type: "options",
            title: "How active are you?",
            subtitle: "Be honest - we'll adjust your plan accordingly",
            options: [
              { value: "sedentary", label: "Not Very Active", icon: "ü™ë" },
              { value: "light", label: "Lightly Active", icon: "üö∂" },
              { value: "moderate", label: "Moderately Active", icon: "üèÉ" },
              { value: "very", label: "Very Active", icon: "üèãÔ∏è" },
              { value: "extra", label: "Extra Active", icon: "üî•" },
            ],
          },
          {
            id: "dietType",
            type: "options",
            title: "Any dietary preferences?",
            subtitle: "We'll respect your choices",
            options: [
              { value: "none", label: "No Restrictions", icon: "üçΩÔ∏è" },
              { value: "vegetarian", label: "Vegetarian", icon: "ü•ó" },
              { value: "vegan", label: "Vegan", icon: "üå±" },
              { value: "pescatarian", label: "Pescatarian", icon: "üêü" },
              { value: "keto", label: "Keto", icon: "ü•ë" },
              { value: "paleo", label: "Paleo", icon: "üçñ" },
            ],
          },
          {
            id: "allergies",
            type: "multiselect",
            title: "Do you have any food allergies?",
            subtitle: "Select all that apply",
            options: [
              { value: "none", label: "None", icon: "‚úÖ" },
              { value: "dairy", label: "Dairy", icon: "ü•õ" },
              { value: "gluten", label: "Gluten", icon: "üåæ" },
              { value: "nuts", label: "Nuts", icon: "ü•ú" },
              { value: "shellfish", label: "Shellfish", icon: "ü¶ê" },
              { value: "eggs", label: "Eggs", icon: "ü•ö" },
              { value: "soy", label: "Soy", icon: "ü´ò" },
            ],
          },
          {
            id: "cookingTime",
            type: "options",
            title: "How much time can you spend cooking?",
            subtitle: "Per meal on average",
            options: [
              { value: "15", label: "15 minutes", icon: "‚ö°" },
              { value: "30", label: "30 minutes", icon: "‚è±Ô∏è" },
              { value: "45", label: "45 minutes", icon: "‚è∞" },
              { value: "60", label: "1 hour+", icon: "üë®‚Äçüç≥" },
            ],
          },
          {
            id: "cookingSkill",
            type: "range",
            title: "Rate your cooking skills",
            subtitle: "Be honest - we'll match recipes to your level",
            min: 1,
            max: 10,
            labels: ["Beginner", "Master Chef"],
          },
          {
            id: "mealPrep",
            type: "options",
            title: "Do you like meal prepping?",
            subtitle: "Preparing meals in advance",
            options: [
              { value: "love", label: "Love it!", icon: "üòç" },
              { value: "sometimes", label: "Sometimes", icon: "ü§î" },
              { value: "rarely", label: "Rarely", icon: "üòê" },
              { value: "never", label: "Never", icon: "üòÖ" },
            ],
          },
          {
            id: "eatingOut",
            type: "options",
            title: "How often do you eat out?",
            subtitle: "Including takeout and delivery",
            options: [
              { value: "daily", label: "Daily", icon: "üçî" },
              { value: "fewWeek", label: "3-4 times/week", icon: "üçï" },
              { value: "weekly", label: "Once a week", icon: "ü•°" },
              { value: "rarely", label: "Rarely", icon: "üè†" },
            ],
          },
          {
            id: "waterIntake",
            type: "range",
            title: "How many glasses of water do you drink daily?",
            subtitle: "Hydration is key!",
            min: 1,
            max: 12,
            labels: ["1 glass", "12+ glasses"],
          },
          {
            id: "sleepHours",
            type: "options",
            title: "How many hours do you sleep?",
            subtitle: "On average per night",
            options: [
              { value: "less5", label: "Less than 5", icon: "üò¥" },
              { value: "5-6", label: "5-6 hours", icon: "üò™" },
              { value: "7-8", label: "7-8 hours", icon: "üòä" },
              { value: "more8", label: "More than 8", icon: "üòÑ" },
            ],
          },
          {
            id: "stressLevel",
            type: "range",
            title: "Rate your stress level",
            subtitle: "This affects your nutrition needs",
            min: 1,
            max: 10,
            labels: ["Very Low", "Very High"],
          },
          {
            id: "healthConditions",
            type: "multiselect",
            title: "Any health conditions we should know about?",
            subtitle: "Select all that apply",
            options: [
              { value: "none", label: "None", icon: "üíö" },
              { value: "diabetes", label: "Diabetes", icon: "ü©∫" },
              { value: "highBP", label: "High Blood Pressure", icon: "‚ù§Ô∏è" },
              { value: "heartDisease", label: "Heart Disease", icon: "üíó" },
              { value: "digestive", label: "Digestive Issues", icon: "ü§¢" },
              { value: "thyroid", label: "Thyroid Issues", icon: "ü¶ã" },
            ],
          },
          {
            id: "motivation",
            type: "range",
            title: "How motivated are you to change?",
            subtitle: "Your success depends on this!",
            min: 1,
            max: 10,
            labels: ["Not Ready", "I'm ALL IN!"],
          },
          {
            id: "startDate",
            type: "options",
            title: "When do you want to start?",
            subtitle: "Your 21-day transformation",
            options: [
              { value: "today", label: "Today!", icon: "üöÄ" },
              { value: "tomorrow", label: "Tomorrow", icon: "üåÖ" },
              { value: "thisWeek", label: "This Week", icon: "üìÖ" },
              { value: "nextWeek", label: "Next Week", icon: "üìÜ" },
            ],
          },
        ],
      };

      // Start Quiz
      function startQuiz() {
        document.getElementById("welcomeScreen").style.display = "none";
        document.getElementById("quizScreen").style.display = "block";
        showQuestion();
      }

      // Show Current Question
      function showQuestion() {
        const question = quizData.questions[quizData.currentQuestion];
        const container = document.getElementById("questionContainer");

        let html = `
                <h2 class="question-title">${question.title}</h2>
                <p class="question-subtitle">${question.subtitle}</p>
            `;

        switch (question.type) {
          case "text":
          case "email":
          case "number":
            html += `
                        <div class="input-group">
                            <input type="${question.type}" 
                                   id="${question.id}" 
                                   placeholder="${question.placeholder}"
                                   value="${
                                     quizData.answers[question.id] || ""
                                   }"
                                   onchange="saveAnswer('${
                                     question.id
                                   }', this.value)">
                        </div>
                    `;
            break;

          case "options":
            html += '<div class="options-grid">';
            question.options.forEach((option) => {
              const isSelected = quizData.answers[question.id] === option.value;
              html += `
                            <div class="option-card ${
                              isSelected ? "selected" : ""
                            }" 
                                 onclick="selectOption('${question.id}', '${
                option.value
              }')">
                                <div class="option-icon">${option.icon}</div>
                                <div class="option-label">${option.label}</div>
                            </div>
                        `;
            });
            html += "</div>";
            break;

          case "multiselect":
            html += '<div class="options-grid">';
            question.options.forEach((option) => {
              const isSelected =
                quizData.answers[question.id] &&
                quizData.answers[question.id].includes(option.value);
              html += `
                            <div class="option-card ${
                              isSelected ? "selected" : ""
                            }" 
                                 onclick="toggleMultiSelect('${
                                   question.id
                                 }', '${option.value}')">
                                <div class="option-icon">${option.icon}</div>
                                <div class="option-label">${option.label}</div>
                            </div>
                        `;
            });
            html += "</div>";
            break;

          case "range":
            const value = quizData.answers[question.id] || question.min;
            html += `
                        <div class="range-container">
                            <div class="range-labels">
                                <span>${question.labels[0]}</span>
                                <span>${question.labels[1]}</span>
                            </div>
                            <input type="range" 
                                   class="range-slider"
                                   min="${question.min}" 
                                   max="${question.max}" 
                                   value="${value}"
                                   oninput="updateRange('${question.id}', this.value)">
                            <div class="range-value" id="${question.id}-value">${value}</div>
                        </div>
                    `;
            break;
        }

        html += `
                <div class="nav-buttons">
                    ${
                      quizData.currentQuestion > 0
                        ? `<button class="btn btn-secondary" onclick="previousQuestion()">‚Üê Back</button>`
                        : ""
                    }
                    <button class="btn btn-primary" 
                            onclick="nextQuestion()" 
                            id="nextBtn"
                            ${!isQuestionAnswered() ? "disabled" : ""}>
                        ${
                          quizData.currentQuestion ===
                          quizData.questions.length - 1
                            ? "See My Results ‚Üí"
                            : "Next ‚Üí"
                        }
                    </button>
                </div>
            `;

        container.innerHTML = html;
        updateProgress();
      }

      // Save Answer Functions
      function saveAnswer(id, value) {
        quizData.answers[id] = value;
        checkNextButton();
      }

      function selectOption(id, value) {
        quizData.answers[id] = value;
        showQuestion();
      }

      function toggleMultiSelect(id, value) {
        if (!quizData.answers[id]) {
          quizData.answers[id] = [];
        }

        if (value === "none") {
          quizData.answers[id] = ["none"];
        } else {
          const index = quizData.answers[id].indexOf(value);
          if (index > -1) {
            quizData.answers[id].splice(index, 1);
          } else {
            // Remove 'none' if selecting other options
            quizData.answers[id] = quizData.answers[id].filter(
              (v) => v !== "none"
            );
            quizData.answers[id].push(value);
          }
        }
        showQuestion();
      }

      function updateRange(id, value) {
        quizData.answers[id] = value;
        document.getElementById(`${id}-value`).textContent = value;
        checkNextButton();
      }

      // Navigation Functions
      function nextQuestion() {
        if (quizData.currentQuestion < quizData.questions.length - 1) {
          quizData.currentQuestion++;
          showQuestion();
        } else {
          showResults();
        }
      }

      function previousQuestion() {
        if (quizData.currentQuestion > 0) {
          quizData.currentQuestion--;
          showQuestion();
        }
      }

      // Check if current question is answered
      function isQuestionAnswered() {
        const question = quizData.questions[quizData.currentQuestion];
        const answer = quizData.answers[question.id];

        switch (question.type) {
          case "text":
          case "email":
          case "number":
            return answer && answer.trim() !== "";
          case "options":
          case "range":
            return answer !== undefined;
          case "multiselect":
            return answer && answer.length > 0;
          default:
            return false;
        }
      }

      function checkNextButton() {
        const nextBtn = document.getElementById("nextBtn");
        if (nextBtn) {
          nextBtn.disabled = !isQuestionAnswered();
        }
      }

      // Update Progress Bar
      function updateProgress() {
        const progress =
          ((quizData.currentQuestion + 1) / quizData.questions.length) * 100;
        const progressBar = document.getElementById("progressBar");
        const stepCounter = document.getElementById("stepCounter");

        progressBar.style.width = `${progress}%`;
        progressBar.textContent = `${Math.round(progress)}%`;
        stepCounter.textContent = `Question ${
          quizData.currentQuestion + 1
        } of ${quizData.questions.length}`;
      }

      // Show Results
      function showResults() {
        document.getElementById("quizScreen").style.display = "none";
        document.getElementById("resultsScreen").style.display = "block";

        // Personalize results
        const userName = quizData.answers.name || "Your";
        document.getElementById("userName").textContent = userName;

        // Calculate personalized insights
        const resultsContent = document.getElementById("resultsContent");
        const weightDiff =
          quizData.answers.weight - quizData.answers.goalWeight || 10;
        const timeFrame = weightDiff > 20 ? "4-6 weeks" : "21 days";

        resultsContent.innerHTML = `
                <div class="result-card">
                    <h3>üéØ Your Weight Loss Goal</h3>
                    <p>Based on your profile, you can safely lose ${Math.min(
                      weightDiff,
                      20
                    )} lbs in ${timeFrame} with your personalized plan.</p>
                </div>
                <div class="result-card">
                    <h3>‚ö° Energy Optimization</h3>
                    <p>Your custom meal plan will boost your energy levels by ${
                      quizData.answers.stressLevel > 5 ? "75%" : "50%"
                    } through balanced nutrition.</p>
                </div>
                <div class="result-card">
                    <h3>üç≥ Perfect Recipe Match</h3>
                    <p>We've selected ${
                      quizData.answers.cookingTime
                    }-minute recipes that match your ${getSkillLevel()} cooking skills.</p>
                </div>
                <div class="result-card">
                    <h3>üåü Personalization Complete</h3>
                    <p>Your plan considers your ${
                      quizData.answers.dietType === "none"
                        ? "preferences"
                        : quizData.answers.dietType + " diet"
                    }, 
                       ${getAllergies()}, and lifestyle needs.</p>
                </div>
            `;
      }

      function getSkillLevel() {
        const skill = parseInt(quizData.answers.cookingSkill) || 5;
        if (skill <= 3) return "beginner";
        if (skill <= 7) return "intermediate";
        return "advanced";
      }

      function getAllergies() {
        const allergies = quizData.answers.allergies || ["none"];
        if (allergies.includes("none")) return "no allergies";
        return allergies.join(", ") + " allergies";
      }

      // CTA Function
      function goToCheckout() {
        window.location.href = "./pv/index.html";
      }
    </script>
  </body>
</html>
